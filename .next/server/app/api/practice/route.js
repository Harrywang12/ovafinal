"use strict";(()=>{var e={};e.id=959,e.ids=[959],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5549:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>S,originalPathname:()=>_,patchFetch:()=>g,requestAsyncStorage:()=>m,routeModule:()=>f,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>E});var i={};t.r(i),t.d(i,{GET:()=>d,POST:()=>p,runtime:()=>c});var a=t(5419),n=t(9108),o=t(9678),s=t(8070),u=t(8234),l=t(5752);let c="nodejs";async function d(e){(0,l.V1)(["SUPABASE_URL","SUPABASE_SERVICE_KEY"]);let r=(0,u.b)(),{searchParams:t}=new URL(e.url),i=t.get("difficulty")||"medium",a="true"===t.get("weekly")?"extreme":i,{data:n,error:o}=await r.from("videos").select("*").eq("difficulty",a).limit(20);if(o)return s.Z.json({error:o.message},{status:500});if(!n||0===n.length)return s.Z.json({error:"No videos available"},{status:404});let c=n[Math.floor(Math.random()*n.length)],d=(0,l.uF)(a);return s.Z.json({video_id:c.id,video_url:c.video_url,correct_call:c.correct_call,explanation:c.explanation,rule_reference:c.rule_reference,duration_seconds:d})}async function p(e){(0,l.V1)(["SUPABASE_URL","SUPABASE_SERVICE_KEY"]);let r=(0,u.b)(),{video_id:t,user_id:i,correct:a,time_taken:n}=await e.json();if(!t)return s.Z.json({error:"video_id required"},{status:400});let{error:o}=await r.from("video_attempts").insert({video_id:t,user_id:i,correct:a,time_taken:n});return o?s.Z.json({error:o.message},{status:500}):s.Z.json({ok:!0})}let f=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/practice/route",pathname:"/api/practice",filename:"route",bundlePath:"app/api/practice/route"},resolvedPagePath:"/Users/harrisonwang/ovafinal/app/api/practice/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:v,headerHooks:S,staticGenerationBailout:E}=f,_="/api/practice/route";function g(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}},8234:(e,r,t)=>{t.d(r,{b:()=>o});var i=t(7493);let a="https://uglzhvquiarxyahsnesj.supabase.co",n=process.env.SUPABASE_SERVICE_KEY,o=()=>{if(!a||!n)throw Error("Supabase environment variables missing (SUPABASE_URL, SUPABASE_SERVICE_KEY).");return(0,i.eI)(a,n,{global:{headers:{"x-client-info":"volleyball-ref-training"}},auth:{autoRefreshToken:!1,detectSessionInUrl:!1,persistSession:!1}})}},5752:(e,r,t)=>{function i(e){switch(e){case"easy":return 3;case"medium":return 4;case"hard":return 5;default:return 6}}function a(e){return e.map((e,r)=>`Rule Snippet ${r+1}${e.similarity?` (sim ${e.similarity.toFixed(2)})`:""}:
${e.chunk}`).join("\n\n")}function n(e){let r=e.filter(e=>!process.env[e]);if(r.length)throw Error(`Missing environment variables: ${r.join(", ")}`)}t.d(r,{V1:()=>n,aZ:()=>a,uF:()=>i})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[638,164],()=>t(5549));module.exports=i})();