(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{4247:function(e,t,i){Promise.resolve().then(i.bind(i,9309))},9309:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return N}});var s=i(3827),a=i(7609),r=i(568),c=i(4090),l=i(5293),n=i(8745),d=i(9369),o=i(7404),x=i(3081),u=i(5420),m=i(6260),p=i(8025),h=i(7976),f=i(1483),b=i(2710),y=i(1742);let j=["easy","medium","hard"],v={easy:"bg-green-500",medium:"bg-accent",hard:"bg-red-500"};function N(){let[e,t]=(0,c.useState)("medium"),[i,N]=(0,c.useState)(null),[g,w]=(0,c.useState)(""),[k,C]=(0,c.useState)(null),[Z,E]=(0,c.useState)(null),_=(0,a.a)({queryKey:["practice",e],queryFn:async()=>{let t=await fetch("/api/practice?difficulty=".concat(e));if(!t.ok)throw Error("Failed to load practice clip");return t.json()}});(0,c.useEffect)(()=>{_.data&&(N(_.data),C(null),w(""),E(_.data.duration_seconds))},[_.data]),(0,c.useEffect)(()=>{_.refetch()},[e]),(0,c.useEffect)(()=>{if(null===Z||Z<=0||k)return;let e=setInterval(()=>{E(e=>null!==e?e-1:null)},1e3);return()=>clearInterval(e)},[Z,k]);let z=(0,r.D)({mutationFn:async e=>{let t=await fetch("/api/practice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to save attempt");return t.json()}});return(0,s.jsx)(b.a,{children:(0,s.jsx)("div",{className:"min-h-screen pt-24 pb-16",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-6",children:[(0,s.jsxs)(l.E.div,{variants:y.eu,initial:"hidden",animate:"visible",className:"text-center mb-12",children:[(0,s.jsx)(l.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-accent/10 text-accent mb-6",children:(0,s.jsx)(d.Z,{size:32})}),(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-display font-bold text-primary mb-4",children:"Video Practice"}),(0,s.jsx)("p",{className:"text-muted text-lg max-w-xl mx-auto",children:"Real game footage with timed decisions. Train your instincts at match speed."})]}),(0,s.jsxs)(l.E.div,{variants:y.Jm,initial:"hidden",animate:"visible",className:"flex flex-wrap items-center justify-center gap-3 mb-10",children:[j.map(i=>(0,s.jsx)(l.E.button,{variants:y.CU,whileHover:{scale:1.05},whileTap:{scale:.98},onClick:()=>t(i),className:"px-5 py-2.5 rounded-full text-sm font-semibold capitalize transition-all ".concat(e===i?"".concat(v[i]," text-white shadow-lg"):"bg-white border border-border text-ink hover:border-accent/40"),children:i},i)),(0,s.jsx)(l.E.button,{variants:y.CU,whileHover:{scale:1.05},whileTap:{scale:.98},onClick:()=>_.refetch(),disabled:_.isLoading,className:"pill text-white",children:_.isLoading?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.E.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:(0,s.jsx)(o.Z,{size:18})}),"Loading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{size:18}),"New Clip"]})})]}),(0,s.jsx)(l.E.div,{variants:y.Jm,initial:"hidden",animate:"visible",className:"grid grid-cols-3 gap-4 mb-10",children:[{icon:u.Z,title:"Timed",desc:"Rally pressure"},{icon:m.Z,title:"Grounded",desc:"Rule cited"},{icon:d.Z,title:"Tracked",desc:"Results saved"}].map((e,t)=>(0,s.jsxs)(l.E.div,{variants:y.CU,className:"card text-center py-4",children:[(0,s.jsx)(e.icon,{size:20,className:"mx-auto text-accent mb-2"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-primary",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted",children:e.desc})]},t))}),(0,s.jsx)(n.M,{mode:"wait",children:i?(0,s.jsxs)(l.E.div,{variants:y.By,initial:"hidden",animate:"visible",exit:{opacity:0,scale:.95},className:"card space-y-6",children:[null!==Z&&!k&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider text-muted",children:"Time to decide"}),(0,s.jsxs)(l.E.div,{animate:Z<=5?{scale:[1,1.1,1]}:{},transition:{duration:.5,repeat:Z<=5?1/0:0},className:"flex items-center gap-2 px-4 py-2 rounded-full font-bold ".concat(Z<=5?"bg-red-100 text-red-600":"bg-surface text-primary"),children:[(0,s.jsx)(u.Z,{size:18}),Z,"s"]})]}),(0,s.jsxs)("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-video",children:[(0,s.jsx)("video",{src:i.video_url,className:"w-full h-full object-cover",controls:!0,preload:"metadata"}),(0,s.jsx)("div",{className:"absolute top-4 left-4",children:(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold text-white ".concat(v[e]),children:e})})]}),!k&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-primary mb-2",children:"Your Call"}),(0,s.jsx)("input",{value:g,onChange:e=>w(e.target.value),placeholder:"e.g., Fault: Net touch on blocker",className:"w-full px-4 py-3 rounded-xl bg-surface border border-border text-ink placeholder:text-muted focus:outline-none focus:ring-2 focus:ring-accent/30"})]}),(0,s.jsxs)(l.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{if(!i)return;let e=g.trim().toLowerCase()===i.correct_call.trim().toLowerCase();C(e?"correct":"incorrect"),z.mutate({video_id:i.video_id,correct:e,time_taken:i.duration_seconds-(Z||0)})},disabled:!g.trim(),className:"pill text-white w-full justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:["Submit Call",(0,s.jsx)(p.Z,{size:18})]})]}),(0,s.jsx)(n.M,{children:k&&(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-4 rounded-xl ".concat("correct"===k?"bg-green-100 border border-green-200":"bg-red-100 border border-red-200"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:["correct"===k?(0,s.jsx)(h.Z,{className:"text-green-600",size:24}):(0,s.jsx)(f.Z,{className:"text-red-600",size:24}),(0,s.jsx)("span",{className:"font-bold text-lg ".concat("correct"===k?"text-green-700":"text-red-700"),children:"correct"===k?"Correct Decision!":"Incorrect Decision"})]})}),(0,s.jsxs)("div",{className:"p-4 rounded-xl bg-surface border border-border space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-muted mb-1",children:"Correct Call"}),(0,s.jsx)("p",{className:"text-ink font-semibold",children:i.correct_call})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-muted mb-1",children:"Explanation"}),(0,s.jsx)("p",{className:"text-ink",children:i.explanation})]}),i.rule_reference&&(0,s.jsxs)("p",{className:"text-sm text-accent font-medium",children:["\uD83D\uDCD6 Rule: ",i.rule_reference]})]}),(0,s.jsxs)(l.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>_.refetch(),className:"pill text-white w-full justify-center",children:["Next Clip",(0,s.jsx)(p.Z,{size:18})]})]})})]},i.video_id):(0,s.jsxs)(l.E.div,{variants:y.eu,initial:"hidden",animate:"visible",className:"card text-center py-16",children:[(0,s.jsx)(l.E.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-accent/10 text-accent mb-6",children:(0,s.jsx)(d.Z,{size:40})}),(0,s.jsx)("h3",{className:"text-xl font-display font-bold text-primary mb-2",children:"Ready for Game Speed?"}),(0,s.jsx)("p",{className:"text-muted mb-6",children:"Load a clip to practice making quick decisions under pressure."}),(0,s.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.98},onClick:()=>_.refetch(),className:"pill text-white",children:[(0,s.jsx)(x.Z,{size:18}),"Load Clip"]})]})})]})})})}},8025:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(7461).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},7976:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(7461).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},3081:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(7461).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},5420:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(7461).Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},1483:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(7461).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},7404:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(7461).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])}},function(e){e.O(0,[621,46,668,892,316,971,69,744],function(){return e(e.s=4247)}),_N_E=e.O()}]);