(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{1721:function(e,t,s){Promise.resolve().then(s.bind(s,2164))},2164:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(3827),i=s(7609),l=s(568),n=s(4090),r=s(5293),d=s(8745),c=s(7461);/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,c.Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),m=(0,c.Z)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);var x=s(6260),h=s(8994);/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,c.Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var b=s(9369),p=s(9990),f=s(2710),v=s(1742);let j=["from-yellow-400 to-amber-500","from-gray-300 to-gray-400","from-amber-600 to-amber-700"],g=[o,m,m];function y(){var e,t;let[s,c]=(0,n.useState)(0),[o,m]=(0,n.useState)(""),y=(0,i.a)({queryKey:["challenge"],queryFn:async()=>{let e=await fetch("/api/challenge");if(!e.ok)throw Error("Failed to load challenge");return e.json()}}),N=(0,l.D)({mutationFn:async()=>{var e,t;let a=await fetch("/api/challenge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:o||void 0,video_id:null===(t=y.data)||void 0===t?void 0:null===(e=t.video)||void 0===e?void 0:e.id,score:s})});if(!a.ok)throw Error("Failed to submit");return a.json()},onSuccess:()=>y.refetch()}),w=null===(e=y.data)||void 0===e?void 0:e.video,k=(null===(t=y.data)||void 0===t?void 0:t.leaderboard)||[];return(0,a.jsx)(f.a,{children:(0,a.jsx)("div",{className:"min-h-screen pt-24 pb-16",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-6",children:[(0,a.jsxs)(r.E.div,{variants:v.eu,initial:"hidden",animate:"visible",className:"text-center mb-12",children:[(0,a.jsx)(r.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-yellow-400 to-amber-500 text-white mb-6 shadow-lg",children:(0,a.jsx)(x.Z,{size:32})}),(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-display font-bold text-primary mb-4",children:"Weekly Challenge"}),(0,a.jsx)("p",{className:"text-muted text-lg max-w-xl mx-auto",children:"One brutal rally per week. Submit your ruling, climb the leaderboard, claim bragging rights."})]}),(0,a.jsx)(r.E.div,{variants:v.eu,initial:"hidden",animate:"visible",className:"flex justify-center mb-10",children:(0,a.jsx)(r.E.button,{whileHover:{scale:1.05},whileTap:{scale:.98},onClick:()=>y.refetch(),disabled:y.isLoading,className:"pill text-white",children:y.isLoading?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{size:18,className:"animate-spin"}),"Loading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{size:18}),"Refresh Challenge"]})})}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-5 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,a.jsxs)(r.E.div,{variants:v.By,initial:"hidden",animate:"visible",className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(b.Z,{className:"text-accent",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-muted",children:"This Week's Challenge"}),(0,a.jsx)("h3",{className:"text-lg font-display font-bold text-primary",children:"Extreme Clip"})]})]}),w?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-video",children:[(0,a.jsx)("video",{src:w.video_url,className:"w-full h-full object-cover",controls:!0}),(0,a.jsx)("div",{className:"absolute top-4 left-4",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold text-white bg-accent",children:"Challenge"})})]}),w.rule_reference&&(0,a.jsxs)("p",{className:"text-sm text-muted",children:["\uD83D\uDCD6 Rule: ",w.rule_reference]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(r.E.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-surface text-muted mb-4",children:(0,a.jsx)(b.Z,{size:32})}),(0,a.jsx)("p",{className:"text-muted",children:"No challenge video this week"})]})]}),(0,a.jsxs)(r.E.div,{variants:v.By,initial:"hidden",animate:"visible",className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(p.Z,{className:"text-accent",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-muted",children:"Your Submission"}),(0,a.jsx)("h3",{className:"text-lg font-display font-bold text-primary",children:"Submit Score"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-muted mb-2",children:"User ID (Optional)"}),(0,a.jsx)("input",{value:o,onChange:e=>m(e.target.value),placeholder:"Your name",className:"w-full px-4 py-3 rounded-xl bg-surface border border-border text-ink placeholder:text-muted focus:outline-none focus:ring-2 focus:ring-accent/30"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-muted mb-2",children:"Score"}),(0,a.jsx)("input",{type:"number",value:s,onChange:e=>c(Number(e.target.value)),placeholder:"0",className:"w-full px-4 py-3 rounded-xl bg-surface border border-border text-ink placeholder:text-muted focus:outline-none focus:ring-2 focus:ring-accent/30"})]})]}),(0,a.jsx)(r.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N.mutate(),disabled:N.isPending||!w,className:"pill text-white w-full justify-center mt-4 disabled:opacity-50",children:N.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{size:18,className:"animate-spin"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{size:18}),"Submit Score"]})})]})]}),(0,a.jsxs)(r.E.div,{variants:v.By,initial:"hidden",animate:"visible",className:"lg:col-span-2 card h-fit",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center text-white",children:(0,a.jsx)(x.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-muted",children:"Rankings"}),(0,a.jsx)("h3",{className:"text-lg font-display font-bold text-primary",children:"Leaderboard"})]})]}),(0,a.jsx)(d.M,{mode:"wait",children:0===k.length?(0,a.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-muted",children:"No entries this week"}),(0,a.jsx)("p",{className:"text-sm text-muted mt-1",children:"Be the first to submit!"})]},"empty"):(0,a.jsx)(r.E.div,{variants:v.Jm,initial:"hidden",animate:"visible",className:"space-y-3",children:k.map((e,t)=>{var s;let i=t<3,l=g[t]||null;return(0,a.jsxs)(r.E.div,{variants:v.CU,className:"flex items-center justify-between p-3 rounded-xl border ".concat(i?"border-accent/30 bg-accent/5":"border-border bg-surface"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[i?(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br ".concat(j[t]," flex items-center justify-center text-white shadow-sm"),children:l&&(0,a.jsx)(l,{size:16})}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-surface border border-border flex items-center justify-center text-muted font-bold text-sm",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold ".concat(i?"text-primary":"text-ink"),children:null!==(s=e.user_id)&&void 0!==s?s:"Anonymous"}),i&&(0,a.jsx)("p",{className:"text-xs text-muted",children:0===t?"Champion":1===t?"Runner-up":"Third Place"})]})]}),(0,a.jsx)("div",{className:"text-lg font-bold ".concat(i?"text-accent":"text-primary"),children:e.best_score})]},t)})},"leaderboard")})]})]})]})})})}},9990:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.306.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])}},function(e){e.O(0,[621,46,668,892,316,971,69,744],function(){return e(e.s=1721)}),_N_E=e.O()}]);